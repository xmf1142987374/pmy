<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../extjs/resources/css/ext-all.css">
  <script type="text/javascript" src="../extjs/ext-all.js"></script>
</head>
<script type="text/javascript">
  Ext.onReady(function () {


//站点区域数据
    var site_areas = Ext.create('Ext.data.Store', {
      fields: ["site_location"],
      proxy:{
        type:"ajax",
        url:"/selSiteNames",
        reader:{
          type:"json",
          totalProperty:"totalCount",
          root:"data"
        }
      },
      //autoLoad:true
    });
    var  node="";
    site_areas.load();




  Ext.create(Ext.container.Viewport, {
    layout: "border",
    items: [{
      region:"north",
      height:30,
      items:[{
        xtype:"checkboxgroup",
        width:400,
        items:[{
          icon:"img/100.png",
          boxLabel:"A类站点"
        },{
          icon:"../img/101.png",
          boxLabel:"B类站点"
        },{
          icon:"../img/102.png",
          boxLabel:"C类站点"
        },{
          icon:"../img/103.png",
          boxLabel:"D类站点"
        }]
      }]
    },{
      title:"站点区域",
      region:"east",
      width:200,
      height:600,
      collapsible:true,
      layout:"accordion",
      items:[{
        title:"长沙县",
        useArrows: true,
        hideCollapseTool:true,
        items:[new Ext.tree.Panel({
          listeners:{
            itemclick:function (tree,cor) {
              var id=cor.raw;
              var tabpanel=parent.Ext.getCmp("tabpanel");
                if (parent.Ext.getCmp(id.id)) {
                  tabpanel.setActiveTab(parent.Ext.getCmp(id.id));
                }else {
                  var t=tabpanel.add({
                    title:id.text,
                    closable:true,
                    id:id.id,
                    html:id.text+"页面",
                    // items:[new mf.three()]
                  });
                  tabpanel.setActiveTab(t);
                }

            }
          },
          id:"cs",
          root:{
            text:"长沙县",
            expand:true,
          },

        })]
      }]
    },{
      region:"center",
      xtype:"tabpanel",
      id:"tabpanel"
    }]
  });


  //填充数据库所有的地方区域
    var arr=new Array();
    site_areas.load({
      callback: function(){
        for (var i = 0; i <site_areas.getCount() ; i++) {
              var id=i*100+100;
              var tmp = site_areas.getAt(i).get("site_location");
              node={leaf:true,text:tmp,id:id};
          arr.push(node);
          if (i==site_areas.getCount()-1){
            Ext.getCmp("cs").getRootNode().appendChild(arr);
          }

        }
      }
    });

  })
</script>
<body>
</body>
</html>